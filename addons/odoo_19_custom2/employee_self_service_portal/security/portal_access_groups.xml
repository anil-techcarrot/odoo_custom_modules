<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Define Portal Access Groups -->
    <record id="group_portal_crm" model="res.groups">
        <field name="name">Portal: CRM Access</field>
<!--        <field name="category_id" ref="base.module_category_hidden"/>-->
        <field name="comment">Users with access to CRM functionality in portal</field>
    </record>
    
    <record id="group_portal_attendance" model="res.groups">
        <field name="name">Portal: Attendance Access</field>
<!--        <field name="category_id" ref="base.module_category_hidden"/>-->
        <field name="comment">Users with access to attendance functionality in portal</field>
    </record>
    
<!--    <record id="group_portal_expenses" model="res.groups">-->
<!--        <field name="name">Portal: Expenses Access</field>-->
<!--        <field name="category_id" ref="base.module_category_hidden"/>-->
<!--        <field name="comment">Users with access to expenses functionality in portal</field>-->
<!--    </record>-->
    
    <record id="group_portal_payslip" model="res.groups">
        <field name="name">Portal: Payslip Access</field>
<!--        <field name="category_id" ref="base.module_category_hidden"/>-->
        <field name="comment">Users with access to payslip functionality in portal</field>
    </record>
    
    <!-- Update Security Rules to Include New Groups -->
    <record id="rule_crm_lead_portal_user" model="ir.rule">
        <field name="name">Portal: Manage Own CRM Leads</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="groups" eval="[(4, ref('employee_self_service_portal.group_portal_crm'))]"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <record id="rule_hr_attendance_portal_user" model="ir.rule">
        <field name="name">Portal: Manage Own Attendance</field>
        <field name="model_id" ref="hr_attendance.model_hr_attendance"/>
        <field name="groups" eval="[(4, ref('employee_self_service_portal.group_portal_attendance'))]"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
<!--    <record id="rule_hr_expense_portal_user" model="ir.rule">-->
<!--        <field name="name">Portal: Manage Own Expenses</field>-->
<!--        <field name="model_id" ref="hr_expense.model_hr_expense"/>-->
<!--        <field name="groups" eval="[(4, ref('employee_self_service_portal.group_portal_expenses'))]"/>-->
<!--        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>-->
<!--        <field name="perm_read" eval="True"/>-->
<!--        <field name="perm_write" eval="True"/>-->
<!--        <field name="perm_create" eval="True"/>-->
<!--        <field name="perm_unlink" eval="False"/>-->
<!--    </record>-->
    
    <record id="rule_hr_payslip_portal_user" model="ir.rule">
        <field name="name">Portal: Access Own Payslips</field>
        <field name="model_id" ref="hr_payroll.model_hr_payslip"/>
        <field name="groups" eval="[(4, ref('employee_self_service_portal.group_portal_payslip'))]"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
</odoo>

<!--access_hr_expense_portal_user,hr.expense.portal.user.access,hr_expense.model_hr_expense,employee_self_service_portal.group_portal_expenses,1,1,1,0-->
<!--access_hr_expense_sheet_portal_user,hr.expense.sheet.portal.user.access,hr_expense.model_hr_expense_sheet,employee_self_service_portal.group_portal_expenses,1,1,1,0-->
